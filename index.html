<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynami Instrumentpanel - Live</title>
<style>
    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        margin: 0;
        color: #333;
        display: flex;
        height: 100vh;
        background: linear-gradient(to bottom, #ffaf4b, #ff8c00);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    .container {
        display: flex;
        width: 100%;
        background-color: rgba(255, 255, 255, 0.9);
        margin: 20px;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .left-panel {
        background-color: #ffffff;
        padding: 40px;
        width: 40%;
        box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        border-right: 1px solid #ddd;
        display: flex;
        flex-direction: column;
        /* Key change for scrolling layout */
        max-height: 100%;
        box-sizing: border-box;
    }

    .right-panel {
        padding: 40px;
        width: 60%;
        display: flex;
        flex-direction: column;
        color: #333;
    }

    h1 {
        font-size: 48px;
        color: #e65100;
        margin-top: 0; /* Removed top margin */
        margin-bottom: 20px; /* Reduced bottom margin */
        text-align: center;
        /* Key change for scrolling layout */
        flex-shrink: 0; /* Prevents the header from shrinking */
    }

    /* NEW: Container for the scrollable list */
    #service-list-container {
        flex-grow: 1; /* Allows this div to take up remaining space */
        overflow-y: auto; /* Adds a scrollbar ONLY if content overflows */
        min-height: 0; /* Flexbox bug fix */
        padding-right: 15px; /* Space for the scrollbar */
    }

    .checklist-item {
        margin-bottom: 25px;
        display: flex;
        align-items: center;
    }

    .checklist-item input[type="checkbox"] {
        display: none;
    }

    .checklist-item label {
        position: relative;
        padding-left: 45px;
        cursor: pointer;
        font-size: 22px;
    }

    .checklist-item label:before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 28px;
        height: 28px;
        border: 3px solid #ff8c00;
        border-radius: 5px;
        background-color: #fff;
    }

    .checklist-item input[type="checkbox"]:checked + label:after {
        content: '';
        position: absolute;
        left: 10px;
        top: 5px;
        width: 8px;
        height: 16px;
        border: solid #e65100;
        border-width: 0 4px 4px 0;
        transform: rotate(45deg);
    }

    #clock {
        font-size: 84px;
        font-weight: bold;
        text-align: center;
        margin-bottom: 5px;
    }

    #date {
        font-size: 32px;
        text-align: center;
        margin-bottom: 30px;
    }

    .logo-container {
        flex-grow: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 0;
    }

    .logo-container img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

</style>
</head>
<body>

<div class="container">
    <div class="left-panel">
        <h1>Servicelista</h1>
        <!-- This div will be populated dynamically by Firebase -->
        <div id="service-list-container">
            <!-- Example: <div class="checklist-item">...</div> will be inserted here -->
        </div>
    </div>
    <div class="right-panel">
        <div id="clock"></div>
        <div id="date"></div>
        <div class="logo-container">
            <img src="Dynami_10a╠èr_OK.png" alt="Dynami 10 år Logotyp">
        </div>
    </div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>

<script>
    // --- CLOCK AND DATE SCRIPT (No changes needed) ---
    function updateTime() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`;

        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('date').textContent = now.toLocaleDateString('sv-SE', options);
    }
    setInterval(updateTime, 1000);
    updateTime();

    // --- FIREBASE INTEGRATION SCRIPT ---

    // 1. PASTE YOUR FIREBASE CONFIGURATION OBJECT HERE
const firebaseConfig = {
  apiKey: "AIzaSyDrkXax4XtQdC_kGIVN1OgleLKIunOrIcM",
  authDomain: "erikdynami.firebaseapp.com",
  projectId: "erikdynami",
  storageBucket: "erikdynami.firebasestorage.app",
  messagingSenderId: "1014648797947",
  appId: "1:1014648797947:web:323c4dc9bc3ad6ef288e5e"
};

    // 2. Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const tasksRef = database.ref('tasks');

    // 3. Get the container for the list
    const listContainer = document.getElementById('service-list-container');

    // 4. Listen for data changes in real-time
    tasksRef.on('value', (snapshot) => {
        const tasks = snapshot.val();
        // Clear the current list to prevent duplicates
        listContainer.innerHTML = ''; 

        if (tasks) {
            // Loop through each task from the database
            Object.keys(tasks).forEach(key => {
                const taskData = tasks[key];
                createTaskElement(key, taskData);
            });
        } else {
            listContainer.innerHTML = '<p>Inga uppgifter att visa.</p>';
        }
    });

    // Function to create and add a single task item to the DOM
    function createTaskElement(key, taskData) {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'checklist-item';
        
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = key; // Use the unique Firebase key as the ID
        checkbox.checked = taskData.completed;

        const label = document.createElement('label');
        label.htmlFor = key;
        label.textContent = taskData.text;

        // Add an event listener to update Firebase when the checkbox is clicked
        checkbox.addEventListener('change', (event) => {
            const isChecked = event.target.checked;
            // Update the 'completed' status in the database for this specific task
            database.ref('tasks/' + key).update({
                completed: isChecked
            });
        });

        itemDiv.appendChild(checkbox);
        itemDiv.appendChild(label);
        listContainer.appendChild(itemDiv);
    }
</script>

</body>
</html>
